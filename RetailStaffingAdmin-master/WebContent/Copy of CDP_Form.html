<!DOCTYPE html>
<html lang="en" id="ng-app">

<head>
        <title>THD Candidate Data Form</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, maximum-scale=1.0" />
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	
<link type="text/css" href="assets/css/jq/THDstyle.css" rel="stylesheet" />
<link type="text/css" href="assets/css/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
<link type="text/css" href="assets/css/jquery.alerts.css" rel="stylesheet" />
<!-- <link type="text/css" href="css/customStyle.css" rel="stylesheet" />-->

<script type="text/javascript" src="assets/js/vendor/jquery-1.11.2.js"></script>
<script type="text/javascript" src="assets/js/vendor/jquery-ui.min.js"></script>
<!-- <script type="text/javascript" src="assets/js/jquery.ui.core.js"></script>
<script type="text/javascript" src="assets/js/jquery.ui.widget.js"></script> -->
<script type="text/javascript" src="assets/js/jquery.blockUI.js"></script>
<!-- <script type="text/javascript" src="assets/js/ui/jquery.ui.mouse.js"></script>
<script type="text/javascript" src="assets/js/ui/jquery.ui.sortable.js"></script> -->
<script type="text/javascript" src="assets/js/jquery.colorbox.js"></script>
<script type="text/javascript" src="assets/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="assets/js/jqalert/jquery.alerts.js"></script>
<!-- <script type="text/javascript" src="assets/js/ui/jquery.ui.datepicker.validation.js"></script> -->

<link rel="shortcut icon" href="assets/images/THDlogo.ico" />
<script type="text/javascript">
	$(function() {

		// ****** Good *********
		//Configured UI Standard for THD Dialog Boxes
		$("#thdDialog").colorbox({
			opacity : .35,
			width : "75%"
		});

		//Tells the web app to fit the entire browser viewport loading.gif
		$(window).resize(function() {
			fit();
		});

		//Document Ready Function
		$(document).ready(function() {
	 		//candidateDataForm Validation
			$('#candidateDataForm').validate({
				rules:{
					'ssnEntry1': {
				    	   required : true,
					   	  minlength : 9,
		   	checkValidSSNStartWith9 : "#ssnEntry1",
  	   	  checkValidSSNStartWith666 : "#ssnEntry1",
  	   	  checkValidSSNStartWith000 : "#ssnEntry1",
  	   	         checkValidSSNFakes : "#ssnEntry1",
  	   	    	  checkSSNIsANumber : "#ssnEntry1"
					},
					'ssnEntry2': {
						   required : true,
						  minlength : 9,
						    equalTo : "#ssnEntry1"
					},				 
					'dobEntry1': {
						   required : true,
						  minlength : 10,
					 checkDobFormat : "#dobEntry1",
				  checkDobAtLeast16 : "#dobEntry1"
					},				 
					'dobEntry2': {
						   required : true,
						  minlength : 10,
						    equalTo : "#dobEntry1"
					},
					'dlNumber2': {
						    equalTo : "#dlNumber1"
					},
					'driversLicenseState': { 
						   required : ("#dlNumber1:filled" || "#dlNumber2:filled")
					},
					'zipCode' : {
						  minlength : 5
					},
					'middleName' : {
						checkValidMiddleNameStartWithSpace : "#middleName"
					}
	 			},

	 			messages: {		      
	 				'ssnEntry1' : {
							checkValidSSNStartWith9 : "Social Security Number cannot start with 9",
						  checkValidSSNStartWith666 : "Social Security Number cannot start with 666",
						  checkValidSSNStartWith000 : "Social Security Number cannot start with 000",
						  	     checkValidSSNFakes : "Social Security Number is invalid",
						  	      checkSSNIsANumber : "Social Security Number can only contain numbers"
	 		        },
	 				'ssnEntry2' : {
	 		        	   equalTo : "Confirm Social Security Number does not match"
	 		        },
	  		       'dobEntry2' : {
	  		 		       equalTo : "Confirm Date Of Birth does not match"
	  		 		},
	  		       'dobEntry1' : {
	  		    	checkDobFormat : "Invalid Date Format",
	  		     checkDobAtLeast16 : "Date Of Birth must reflect age 16 or greater"	
	  		 		},
	  		 	   'dlNumber2' : {
	  		 			equalTo : "Confirm Driver's License does not match"
	  		 		},
	  		 	   'driversLicenseState' : {
	  		 		required : "Required when Drivers's License is entered"	 
	  		 	   },
				   'middleName' : {
					checkValidMiddleNameStartWithSpace : "Invalid Middle Name"
				}
	 		    }			
			});  // End $('#candidateDataForm').validate({			
			
			//mgrEntryAreaForm Validation
			$('#mgrEntryAreaForm').validate({
				rules:{
					'mgrLdap' : {
						equalToIgnoreCase : "#currentMgrLdap"
					},
	 			},
	 			messages: {		      
	  		 		'mgrLdap' : {
	  		 			equalToIgnoreCase : "LDAP must match logged in User"	        
	  		 		}	 		  
	 		    }		
			});  // End $('#mgrEntryAreaForm').validate({
			
			//Cancel Button Click Event
			$("#cancel").click(function() {
		        if($("#mgrEntryAreaForm").valid()){
		            closeWindow();
		            return false;
		        } else {
					//Do Nothing.
		        }
		    });  //End - $("#cancel").click(function() {
			
			//Submit Button Click Event
		  	$("#submit").click(function(e) {
				e.preventDefault();  
				if($("#candidateDataForm").valid()) {
			    	if ($("#mgrEntryAreaForm").valid()) {
			        	var formjson = $('form#candidateDataForm').serializeArray();
			        	var formjson2 = $('form#candidateDataSearch').serializeArray();
			        	var formjson3 = $('form#mgrEntryAreaForm').serializeArray();
			        	var formxml = json2xml(formjson);
						formxml = "<SubmitCandidatePersonalDataRequest>" + formxml;
						formxml = formxml + json2xml(formjson2); 
						formxml = formxml + json2xml(formjson3);
						formxml =  formxml + "</SubmitCandidatePersonalDataRequest>";
			        	
						// Block UI
						$.blockUI({
							message : $('#updating')
						});
						
						
						$.ajax({
							type : "POST",
							url : "/RetailStaffing/service/CandidateDataFormService/submitCandidateDetails",
							dataType : "xml",
							contentType:"application/xml",
							data: {request: formxml},
							success : submitResult,
							failure : callFailed
						}); // End - $.ajax({

			        } else {
						//Do Nothing, Validation shows the messages.
			        }  //End - if ($("#mgrEntryAreaForm").valid()) { 
				}  //End - if($("#candidateDataForm").valid()) {
			});  //End - $("#submit").click(function(e){			
		}); // End -  $(document).ready(function() {
		
		// Service Call to Load Candidate Data Form - User Data and State Drop Down data
		$(window).load(function() {
			// Block UI
			$.blockUI({
				message : $('#loading')
			});
			
			//Disable Candidate Entry section
			$("#candidateDataPortlet").find("*").prop('disabled',true);
			$("#submit").prop('disabled',true);
			
			$("#lessThan18Message").hide();
			
			//Get User Data and State Data
			$.ajax({
				type : "GET",
				url : "/RetailStaffing/service/CandidateDataFormService/loadCandidateDataForm",
				dataType : "xml",
				contentType:"application/xml",
				success : loadCandidateDataForm,
				failure : callFailed
			});
		}); //$(window).load(function()
				
		$(".portlet").addClass(
				"ui-widget ui-widget-content ui-helper-clearfix ui-corner-all")
				.find(".portlet-header").addClass(
						"ui-widget-header ui-corner-all")
				.end().find(".portlet-content");

		//For class = ui-state-hover, maintain orange call to action, do not remove class
		$('.ui-state-hover').hover(function() {
			$(this).addClass('ui-state-hover');
		});

		
		//Only allow numbers 0-9 for Candidate Id
		$('#candidateId').bind('keypress', function (event) {
		    var regex = new RegExp("^[0-9\b]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    } 
		}); // End - Only allow numbers 0-9 for SSN Entry 1
		
		//Only allow numbers 0-9 for SSN Entry 1
		$('#ssnEntry1').bind('keypress', function (event) {
		    var regex = new RegExp("^[0-9]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow numbers 0-9 for SSN Entry 1		

		//Only allow numbers 0-9 for SSN Entry 2
		$('#ssnEntry2').bind('keypress', function (event) {
		    var regex = new RegExp("^[0-9]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow numbers 0-9 for SSN Entry 2		
		
		//Only allow numbers 0-9 and / for DOB Entry 1
		$('#dobEntry1').bind('keypress', function (event) {
		    var regex = new RegExp("^[0-9\/]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow numbers 0-9 and / for DOB Entry 1		
		
		//Only allow numbers 0-9 and / for DOB Entry 2
		$('#dobEntry2').bind('keypress', function (event) {
		    var regex = new RegExp("^[0-9\/]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow numbers 0-9 and / for DOB Entry 1		
		
		//Only allow specified characters for Driver's License number 1
		$('#dlNumber1').bind('keypress', function (event) {
		    var regex = new RegExp("^[a-zA-Z0-9\* ]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow specified characters for Driver's License number 1		
		
		//Only allow specified characters for Driver's License number 2
		$('#dlNumber2').bind('keypress', function (event) {
		    var regex = new RegExp("^[a-zA-Z0-9\* ]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow specified characters for Driver's License number 2
		
		//Only allow specified characters for Candidate Initials
		$('#candidateInitials').bind('keypress', function (event) {
		    var regex = new RegExp("^[a-zA-Z0-9]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow specified characters for Candidate Initials
		
		//Only allow specified characters for Middle Name
		$('#middleName').bind('keypress', function (event) {
		    var regex = new RegExp("^[a-zA-Z\- ]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow specified characters for Middle Name
		
		//Only allow specified characters for Address 1
		$('#address1').bind('keypress', function (event) {
		    var regex = new RegExp("^[a-zA-Z0-9\-\_ ]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow specified characters for Address 1		
		
		//Only allow specified characters for Address 2
		$('#address2').bind('keypress', function (event) {
		    var regex = new RegExp("^[a-zA-Z0-9\-\_ ]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow specified characters for Address 2
		
		//Only allow specified characters for City
		$('#city').bind('keypress', function (event) {
		    var regex = new RegExp("^[a-zA-Z0-9\-\_ ]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    }
		}); // End - Only allow specified characters for City		
				
		//Only allow numbers 0-9 for Zip Code
		$('#zipCode').bind('keypress', function (event) {
		    var regex = new RegExp("^[0-9\b]");
		    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
		    if (!regex.test(key)) {
		       event.preventDefault();
		       return false;
		    } 
		}); // End - Only allow numbers 0-9 for Zip Code
		
		//Compare strings ignoring case
		$.validator.addMethod("equalToIgnoreCase", function (value, element, param) {
	        return this.optional(element) || 
	             (value.toLowerCase() == $(param).val().toLowerCase());
		}); // End - Compare strings ignoring case
		
		//Make sure that something has been selected in a combo box
		$.validator.addMethod("selectComboboxCheck", function (value, element) {
			if ($(element).find(":selected").val() == -1) {
		    	return false; 
		    }
		    	else return true;
		    },
		        "Required"
		); //End - $.validator.addMethod("selectComboboxCheck", function (value, element) {
		
		//Check the DOB Format
		$.validator.addMethod("checkDobFormat", function (value, element, param) {
			return $(param).val().match(/^\d\d?\/\d\d?\/\d\d\d\d$/);
		}); // End - Check the DOB Format

		//Make sure that the DOB reflects that User is at least 16
		$.validator.addMethod("checkDobAtLeast16", function (value, element, param) {
			var isValid = $(param).val().match(/^\d\d?\/\d\d?\/\d\d\d\d$/);
			if (isValid) {
				var  minDate = Date.parse(document.getElementById("maxDOBValue").value);  
		        var DOB = Date.parse($(param).val());  
		        if(DOB > minDate) {  
		            return false;  
		        } 
			}
			
			//Check to see if candidate is 16 or 17, if yes, show message
			var theVal = new Date(DOB).getFullYear() - new Date (minDate).getFullYear();
			if (theVal > -2 && theVal < 1) {
				$("#lessThan18Message").show(); 
			} else {
				$("#lessThan18Message").hide();	
			}
			
			return true;
		}); // End - Make sure that the DOB reflects that User is at least 16		
		
		//Make sure that the SSN does not start with 9 
		$.validator.addMethod("checkValidSSNStartWith9", function (value, element, param) {
			if ($(param).val().substr(0,1) == '9') {
				return false;
			}
			return true;
		}); // End - Make sure that the SSN does not start with 9		
		
		//Make sure that the SSN does not start with 666 
		$.validator.addMethod("checkValidSSNStartWith666", function (value, element, param) {
			if ($(param).val().substr(0,3) == '666') {
				return false;
			}
			return true;
		}); // End - Make sure that the SSN does not start with 666		
		
		//Make sure that the SSN does not start with 000 
		$.validator.addMethod("checkValidSSNStartWith000", function (value, element, param) {
			if ($(param).val().substr(0,3) == '000') {
				return false;
			}
			return true;
		}); // End - Make sure that the SSN does not start with 000		
		
		//Make sure that the SSN is not known fakes
		$.validator.addMethod("checkValidSSNFakes", function (value, element, param) {
			if ($(param).val() == '078051120' || $(param).val() == '219099999') {
				return false;
			}
			return true;
		}); // End - Make sure that the SSN is not known fakes
		
		//Make sure that the SSN is a number
		$.validator.addMethod("checkSSNIsANumber", function (value, element, param) {
		//	if ($(param).val() == '078051120') {
				return $.isNumeric($(param).val());
		//	}
		//	return true;
		}); // End - Make sure that the SSN is a number		
		
		//Make sure that the Middle Name does not start with space 
		$.validator.addMethod("checkValidMiddleNameStartWithSpace", function (value, element, param) {
			if ($(param).val().substr(0,1) == ' ') {
				return false;
			}
			return true;
		}); // End - Make sure that the Middle Name does not start with space		
	});

	// Fits Form to Page based on screen resolution
	function fit() {
		var w = window, d = document, e = d.documentElement, g = d
				.getElementsByTagName('body')[0], y = w.innerHeight
				|| e.clientHeight || g.clientHeight;
		var height = y - $("#header").height() - $("#messageBar").height()
				- $("#release").height() - $("#copyright").height() - 60;
		
		$("#appBody").css("min-height", height);
	}	
	
	// Loads User information, State Drop Down, and Date Signed
	function loadCandidateDataForm(xml) {
		//Check for Error Messages
		var anyErrors = $(xml).find("Exception");
		if (anyErrors.length) {
			//Get Error message
			var errorMessage = anyErrors.find('userMessage').text();
			//Alert User to Error
			jErrorAlert(errorMessage, 'Error Message');
			//Block UI
			$.blockUI({
				message : $('#fatalError')});
		} else {
			//Load User Data
			$(xml).find("userData").each(function() {
				$("#loginUserName").val($(this).find("firstName").text() + " " + $(this).find("lastName").text());
				$("#requesterName").val($(this).find("firstName").text() + " " + $(this).find("lastName").text());
				$("#loginUserStore").val("Store: #" + $(this).find("location").text());
				document.getElementById("currentMgrLdap").value = $(this).find("userId").text();
			}); 
		
			// Load Drivers License State Drop Down
			var select = $('#driversLicenseState');
			$(xml).find('StateDetail').each(function() {
				var title = $(this).find('stateName').text() + " - " + $(this).find('stateCode').text();
				var value = $(this).find('stateCode').text();
				select.append("<option value=" + value + ">" + title +"</option>");
			});
			
			// Load Address State Drop Down
			var select2 = $('#addressState');
			$(xml).find('StateDetail').each(function() {
				var title = $(this).find('stateName').text() + " - " + $(this).find('stateCode').text();
				var value = $(this).find('stateCode').text();
				select2.append("<option value=" + value + ">" + title +"</option>");
			});			
			
			//Load Current Date
			var response = $(xml).find("Response");
			$("#dateSigned").val(response.find("currentDate").text());
			
			//Load Max DOB Date
			var response = $(xml).find("Response");
			$("#maxDOBValue").val(response.find("maxDOBDate").text());			
			
			$('input:radio[name="hasMiddleName"]').filter('[value="Y"]').attr('checked', true);
			
			$('input:radio[name="livedAtCurrentAddressRequiredTime"]').filter('[value="N"]').attr('checked', true);
			
			
			$.unblockUI();
		} // else if (anyErrors.length)
	}  //function loadCandidateDataForm(xml)

	function callFailed() {
		alert("Application Failed....");
	}
	
	//Converts JSON to XML
	function json2xml(o, tab) {
		var toXml = function(v, name, ind) {
			var xml = "";
			if (typeof(v) == "object") {
				var hasChild = false;
		    	for (var m in v) {
		    		if (m.charAt(0) == "@") {
		        		xml += " " + m.substr(1) + "=\"" + v[m].toString() + "\"";
		       		} else {
		          		hasChild = true;
		        	}
		    	}
		    	if (hasChild) {
		    		for (var m in v) {
		        		if (m=="name") {
		            		xml += "<" + v[m] + ">" + v['value'] + "</" + v[m] + ">";
		          		}
		        	}
		    	}
			}
			return xml;
		}, xml="";
		  
		for (var m in o) {
		    xml += toXml(o[m], m, "");
		}
		return xml;
	}
	
</script>

</head>
<body id="thdBody" onload="fit()">
	<div id="thdWebApp" class="ieGrad">
		<table id="header" border="0" width="100%">
			<tr>
				<td valign="top" nowrap="nowrap" class="brandBox">
					<table border="0" cellpadding="0" cellspacing="0">
						<tr>
							<td><a href="CDP_Form.html" title="Go Home" style="border: 0px"><img
									src="assets/images/THD_logo.png" alt="Go Home" class="logo" width="57"
									height="57" /></a></td>
							<td nowrap="nowrap" style="vertical-align: center"><span
								style="position: relative; top: 5px"> <span id="appName">Staffing
										Forms</span><br /> <span id="appTagline">Candidate Personal Data Form</span>
							</span></td>
						</tr>
					</table>
				</td>
				<td align="center" style="vertical-align: top" valign="top"
					class="menuBox"></td>
				<td align="right" nowrap="nowrap"><span style="display: block"></span>
					<span class="userName"><input id="loginUserName" type="text"
						name="loginUserName" style="border: none; background: none; text-align: right; padding-right: 10px;" /></span>
					<br>
					<span class="storeID"><input id="loginUserStore" type="text"
						name="loginUserStore" style="border: none; background: none; text-align: right; padding-right: 10px;" /></span>
				</td>
				<input type="hidden" id="currentMgrLdap" name="currentMgrLdap">
				<input type="hidden" id="maxDOBValue" name="maxDOBValue">
			</tr>
		</table>

		<div id="messageBar">Candidate Personal Data Form</div>

		<div id="appBody">
		 	<p align="center">Please complete the form below to submit a request for rehire eligibility check. Once you have 
		 	filled in all fields, click submit. If you have questions or need help, please call 1-866-myTHDHR. (1-866-698-4347)</p> 

			<div id="portlets"
				style="display: inline-block; clear: all; width: 100%;">
				<div class="column" style="width: 100%;">
					
					<!-- ****** Candidate Info Section Candidate Id and Name Begin ******* -->
					<form action="" id="candidateDataSearch">
						<input type="hidden" id="applicantId" name="applicantId">
						<div class="portlet" id="candidateInfoPortlet">
							<div class="portlet-header">Candidate Information - To Be Completed by the Hiring Manager</div>
							<div class="portlet-content" id="candidateInfoContentPortlet">
								<table border="0" align="center" width="900px">
									<tr>
										<td width="50%" align="right"><label for="candidateId" style="text-align: right;">Candidate Reference Number:<em>*</em></label></td>
										<td width="50%" align="left"><input id="candidateId" name="candidateId" class="required" type="text" size="10" maxlength="10" onchange="clearAllCandidateData()"/>
											&nbsp;&nbsp;&nbsp;<button name="search" id="search" class="ui-state-hover" >Search</button>
											<br/><label for="candidateId" class="error" generated="true" style="color: red; font-size: .85em">
										</td>
									</tr>
									<tr>
										<td align="right"><label for="name" style="text-align: right;">Candidate Name:<em>*</em></label></td>
										<td align="left"><input id="name" name="name" type="text" readonly="readonly" style="border: none; background: none;" size="50"/></td>
									</tr>
								</table>
							</div>	<!-- class="portlet-content" id="candidateInfoContentPortlet" -->
						</div>	<!-- class="portlet" id="candidateInfoPortlet" -->
					</form>  <!-- action="" id="candidateDataSearch"  -->							
					<!-- ****** Candidate Info Section Candidate Id and Name End ******* -->

					
					<!-- ****** Candidate Personal Data Section Begin ******* -->					
					<form action="" id="candidateDataForm" >
					<div class="portlet" id="candidateDataPortlet">
						<div class="portlet-header">Candidate Personal Information - To Be Completed by the Candidate</div>
						<div class="portlet-content" id="candidateDataContentPortlet">
							<table align="center" border="0" width="900px">

								<tr>
									<td align="right"><label for="hasMiddleName" style="text-align: right;">Do you have a Legal Middle Name?:<em>*</em></label></td>
									<td><label><input type="radio" name="hasMiddleName" value="Y" onclick="updateMiddleNameField()">Yes</label>
									<label><input type="radio" name="hasMiddleName" value="N" onclick="updateMiddleNameField()" >No</label>
									<label for="hasMiddleName" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
								
								<tr id="middleNameRow">
									<td width="50%" align="right"><label for="middleName" style="text-align: right;">Legal Middle Name:<em>*</em></label></td>
									<td width="50%" align="left"><input id="middleName" name="middleName" class="required" size="24" maxlength="24"/>
									<label for="middleName" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>								
								
								<tr>
									<td align="right"><label for="livedAtCurrentAddressRequiredTime" style="text-align: right;">Have you lived at current address for at least 10 years?:<em>*</em></label></td>
									<td><label><input type="radio" name="livedAtCurrentAddressRequiredTime" value="Y" onclick="updatePreviousAddressField()">Yes</label>
									<label><input type="radio" name="livedAtCurrentAddressRequiredTime" value="N" onclick="updatePreviousAddressField()" >No</label>
									<label for="livedAtCurrentAddressRequiredTime" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>

								 <tr id="address1Row">
									<td width="50%" align="right"><label for="address1" style="text-align: right;">Previous Street Address:<em>*</em></label></td>
									<td width="50%" align="left"><input id="address1" name="address1" class="required" size="24" maxlength="60"/>
									<label for="address1" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>

								<tr id="address2Row">
									<td width="50%" align="right"><label for="address2" style="text-align: right;">Additional Previous Address Info:</label></td>
									<td width="50%" align="left"><input id="address2" name="address2" size="24" maxlength="60"/>
									<label for="address2" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
								
								<tr id="cityRow">
									<td width="50%" align="right"><label for="city" style="text-align: right;">Previous City:<em>*</em></label></td>
									<td width="50%" align="left"><input id="city" name="city" class="required" size="24" maxlength="60"/>
									<label for="city" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>

								<tr id="addressStateRow">
									<td align="right"><label for="addressState" style="text-align: right;">Previous State:<em>*</em></label></td>
									<td align="left"><select id="addressState" name="addressState" class="required" style="width:185px" size="1">
               					 	  	 	 	 	 	<option value="">Select...</option>
      												 </select>
      								  &nbsp;&nbsp;<label for="addressState" class="error" generated="true" style="color: red; font-size: .85em">				 
      								</td>
								</tr>
								
								<tr id="zipCodeRow">
									<td width="50%" align="right"><label for="zipCode" style="text-align: right;">Previous Zip Code:<em>*</em></label></td>
									<td width="50%" align="left"><input id="zipCode" name="zipCode" class="required" size="4" maxlength="5"/>
									<label for="zipCode" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
																								
								<tr>
									<td width="50%" align="right"><label for="ssnEntry1" style="text-align: right;">Social Security Number:<em>*</em></label></td>
									<td width="50%" align="left"><input id="ssnEntry1" name="ssnEntry1" class="required" type="password" size="9" maxlength="9"/>&nbsp;(no dashes)
									<label for="ssnEntry1" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
								<tr>
									<td align="right"><label for="ssnEntry2" style="text-align: right;">Confirm Social Security Number:<em>*</em></label></td>
									<td align="left"><input id="ssnEntry2" name="ssnEntry2" class="required" type="password" size="9" maxlength="9"/>&nbsp;(no dashes)
									<label for="ssnEntry2" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
								<tr>
									<td align="right"><label for="dobEntry1" style="text-align: right;">Date Of Birth:<em>*</em></label></td>
									<td align="left"><input id="dobEntry1" name="dobEntry1" class="required" type="password" size="10" maxlength="10"/>&nbsp;(MM/DD/YYYY)
									<label for="dobEntry1" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
								<tr>
									<td align="right"><label for="dobEntry2" style="text-align: right;">Confirm Date Of Birth:<em>*</em></label></td>
									<td align="left"><input id="dobEntry2" name="dobEntry2" class="required" type="password" size="10" maxlength="10"/>&nbsp;(MM/DD/YYYY)
									<label for="dobEntry2" class="error" generated="true" style="color: red; font-size: .85em"></td>
									</tr>																				
								<tr>
									<td align="right"><label for="dlNumber1" style="text-align: right;">Driver's License Number:<em>&nbsp;</em></label></td>
									<td align="left"><input id="dlNumber1" name="dlNumber1" type="password" size="25" maxlength="30"/></td>
								</tr>												
								<tr>
									<td align="right"><label for="dlNumber2" style="text-align: right;">Confirm Driver's License Number:<em>&nbsp;</em></label></td>
									<td align="left"><input id="dlNumber2" name="dlNumber2" type="password" size="25" maxlength="30"/>
									   &nbsp;&nbsp;<label for="dlNumber2" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>												
								<tr>
									<td align="right"><label for="driversLicenseState" style="text-align: right;">Driver's License Issuing State:<em>&nbsp;</em></label></td>
									<td align="left"><select id="driversLicenseState" name="driversLicenseState" style="width:185px" size="1">
               					 	  	 	 	 	 	<option value="">Select...</option>
      												 </select>
      								  &nbsp;&nbsp;<label for="driversLicenseState" class="error" generated="true" style="color: red; font-size: .85em">				 
      								</td>
								</tr>												
								<tr>
									<td width="100%" colspan="2">
										The Home Depot is an equal opportunity employer. Information from a consumer report or investigative consumer report will not be used in violation of any equal employment 
										opportunity law or regulation. Date of birth information (including driver's license information which includes date of birth information) is for identification verification 
										purposes only and is not considered in making employment decisions.&nbsp;&nbsp;Home Depot personnel who will be involved in hiring decisions will not have access to date of birth information 
										before a conditional offer of employment is made.&nbsp;&nbsp;Unless otherwise prohibited by applicable law, I release Home Depot and/or its agents and any person or entity that provides 
										information pursuant to this authorization from any and all liabilities, claims, or lawsuits in regard to the information obtained from any and all of the above referenced sources.  
										I agree that the giving of any false, misleading, or incomplete information on my employment application, this form, or otherwise will be grounds for denial or termination of employment.
										&nbsp;&nbsp;By selecting "I Accept" below, you are signing this Authorization electronically.&nbsp;&nbsp;You agree your electronic signature is the legal equivalent of your manual signature on this Background 
										Check Authorization agreement.
									</td>
								</tr>			
								<tr>
									<td align="right"><label for="acceptChecked" style="text-align: right;">I Accept the above Statement:<em>*</em></label></td>
									<td><label><input type="checkbox" id="acceptChecked" class="required" name="acceptChecked" value="Y"/>Accept</label>
									<label for="acceptChecked" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
								<tr>
									<td align="right"><label for="candidateInitials" style="text-align: right;">Candidate Initials confirming acceptance:<em>*</em></label></td>
									<td align="left"><input id="candidateInitials" name="candidateInitials" class="required" type="text" size="10" maxlength="8"/>
									<label for="candidateInitials" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>																																				
								<tr>
									<td align="right"><label for="dateSigned" style="text-align: right;">Date Signed:<em>&nbsp;</em></label></td>
									<td align="left"><input type="text" size="10" name="dateSigned" id="dateSigned" disabled="disabled"/></td>
								</tr>						
							</table>
						</div> <!-- class="portlet-content" id="candidateDataContentPortlet" -->
					</div> <!-- class="portlet" id="candidateDataPortlet" -->
					</form>
					<!-- ****** Candidate Personal Data Section End ******* -->
				
					<!-- ****** Hiring Mgr LDAP Section Begin ******* -->
					<form action="" id="mgrEntryAreaForm" >
					<div class="portlet" id="hiringMgrInfoPortlet">
						<div class="portlet-header">Hiring Manager - To Be Completed by the Hiring Manager</div>
						<div class="portlet-content" id="hiringMgrContentPortlet">
							<table border="0" align="center" width="900px">
								<tr id="lessThan18Message" height="35px" align="center" valign="middle">
									<td colspan="2">
										<div >
											<label style="color: red;">ALERT! The date of birth entered indicates the candidate is under 18 years of age. 
											Please confirm the candidate’s age. If candidate is under 18 and you are in an approved minor hiring state, 
											obtain parent/guardian consent for the drug test <u>and</u> background check before processing. 
											(Additional documentation may be required. Refer to the Minor Associates SOP for your state’s specific requirements. myTHDHR> HR SOPs.)</label>
										</div>
									</td>
								</tr>
																			
								<tr>
									<td width="50%" align="right"><label for="mgrLdap" style="text-align: right;">Hiring Manager LDAP:<em>*</em></label></td>
									<td width="50%" align="left"><input id="mgrLdap" name="mgrLdap" class="required" type="password" size="15" maxlength="8"/>
											&nbsp;&nbsp;<label for="mgrLdap" class="error" generated="true" style="color: red; font-size: .85em"></td>
								</tr>
							</table>
							<table border="0" align="center" width="900px">
								<tr align="center" style="height: 30px">
									<td width="50%" align="right"><button name="submit" id="submit" class="ui-state-hover" >Submit</button>&nbsp;&nbsp;</td>
									<td width="50%" align="left">&nbsp;&nbsp;<button name="cancel" id="cancel" class="ui-state-hover">Cancel</button></td>
								</tr>
							</table>
						</div>	<!-- class="portlet-content" id="hiringMgrContentPortlet" -->
					</div>	<!-- class="portlet" id="hiringMgrInfoPortlet" -->
					</form>
					<!-- ****** Hiring Mgr LDAP Section End ******* -->					
					
				</div>	<!-- class="column" -->
			</div>	<!-- div id="portlets" -->
			<!-- </fieldset> -->
			
		</div> <!-- id="appBody" -->

		<!-- Loading Div Section -->
		<div id="loading" class="hideme" style="display: none;">
			<center>
				<h3>Loading...Please Wait...</h3>
				<br /> <img src="assets/images/loadingAnimation.gif" alt="" /><br /> <br />
			</center>
		</div> <!-- id="loading" -->
		
		<!-- Updating Div Section -->
		<div id="updating" class="hideme" style="display: none;">
			<center>
				<h3>Updating...Please Wait...</h3>
				<br /> <img src="assets/images/loadingAnimation.gif" alt="" /><br /> <br />
			</center>
		</div> <!-- id="updating" -->
		
		<!-- Fatal Error Div Section -->
		<div id="fatalError" class="hideme" style="display: none;">
			<center>
				<h3>Fatal Error has occurred, please close browser and restart application.  If error continues, please contact Helpdesk</h3>
			</center>
		</div> <!-- id="fatalError" -->
				
		<!-- Copyright Div Section -->
		<div id="copyright">Copyright &copy; 2001-2015 Homer TLC, Inc.
			All Rights Reserved.</div>
	
	</div>  <!-- id="thdWebApp" -->
		
	<!-- Release Div Section -->
	<div id="release">Release 1.0</div>
	
<!-- ****** Javascript that can be loaded after the form has loaded ****** --> 
<script type="text/javascript">
	
	//call service to get the Candidate Name based on the Candidate Reference Number
	$('#candidateDataSearch').validate({
		rules:{
			'candidateId': {
			    required : true,
			   minlength : 1
			}			
		},

		messages: {		      
	       'candidateId': {
		       required : "Please provide a Candidate Reference Number",
		      minlength : "Candidate Reference Number must be at least 1 digit",
		      
		   }
		},
		
		//All validation passed, therfore submit request.
		submitHandler: function(form) {
			//Clear all Candidate Data From Data
			clearAllCandidateData();
				
			//Block UI
			$.blockUI({
				message : $('#loading')
			});
				
			//Make Service Call
			$.ajax({
				type : "POST",
				url : "/RetailStaffing/service/CandidateDataFormService/searchCandidateId",
				dataType : "xml",
				contentType:"application/xml",
				data: {candidateId: $("#candidateId").val()},
				success : updateCandidateName,
				failure : callFailed
			}); //End - $.ajax({ 
		}  // End - submitHandler: function(form) {			
	});  // End $('#candidateDataForm').validate({
	
	//Update the Candidate Name based on the Candidate Reference Number
	function updateCandidateName(xml) {
		//Check for Error Messages
		var anyErrors = $(xml).find("Exception");
		if (anyErrors.length) {
			//Get Error message
			var errorMessage = anyErrors.find('userMessage').text();
			//Alert User to Error
			jErrorAlert(errorMessage, 'Error Message');
			//Unblock UI
			$.unblockUI();
		} else {
			//Load Candidate Data
			var address1 = "";
			var address2 = "";
			var cityStateZip = "";
			$(xml).find("CandidateDetails").each(function() {
				$("#name").val($(this).find("name").text());
				address1 = $(this).find("address1").text();
				address2 = $(this).find("address2").text();
				cityStateZip = $(this).find("city").text() + " " + $(this).find("stateCode").text() + " " + $(this).find("zip").text()
				$("#applicantId").val($(this).find("ssnNbr").text());
			}); 
			
			var message = '<font size="3"><strong>'+$("#name").val()+'</strong></font><br/>'
			message += (address1 + "<br/>");
			if (address2 != "") {
				message += (address2 + "<br/>");
			}
			message += (cityStateZip + "<br/><br/>");
			message += "Please click Ok to confirm that this is the correct information for the candidate. Click Cancel to search for another candidate.";
			
			jConfirm(message, 'Candidate Confirmation', function(r) {
			    if (!r) {
			    	clearAllCandidateData();
					$("#candidateId").val("");
			    }
			});
			
			//Unblock UI		
			$.unblockUI();
			//Enable Candidate Entry section
			$("#candidateDataPortlet").find("*").prop('disabled',false);
			$("#candidateDataPortlet").find("#dateSigned").prop('disabled',true);
			$("#submit").prop('disabled',false);
		} // else if (anyErrors.length)
	}  //function updateCandidateName(xml)
	
	function submitResult(xml) {
		//Check for Error Messages
		var anyErrors = $(xml).find("Exception");
		if (anyErrors.length) {
			//Get Error message
			var errorMessage = anyErrors.find('userMessage').text();
			//Alert User to Error
			jErrorAlert(errorMessage, 'Error Message');
			clearAllCandidateData();
			$("#candidateId").val("");
			$.unblockUI();
		} else {
			jAlert("Candidate Personal data for " + $("#name").val() + " was updated successfully.", 'Success Message');	
			clearAllCandidateData();
			$("#candidateId").val("");
			$.unblockUI();
		} // else if (anyErrors.length)
	}
	
	//Close the Window.  Manager has entered a valid LDAP id
	function closeWindow() {
	  if (confirm("Close Candidate Personal Data Form?")) {
	  	//Clear Candidate Data Form
		clearAllCandidateData();
	  	//Clear Candidate Search Form
		$('#candidateDataSearch').trigger("reset");
		//Clear any Validation error messages		
		var validator = $("#candidateDataSearch").validate();
		validator.resetForm();
	    close();
	  } else {
		$("#mgrLdap").val("");  
	  }
	}
	
	//The Candidate ID was changed, need to clear anything entered and lock Candidate Entry area
	function clearAllCandidateData() {
		//Clear Name
		$("#name").val("");
		//Clear all Candidate entered data
		$('#candidateDataForm').trigger("reset");
		//Clear any Validation error messages		
		var validator = $("#candidateDataForm").validate();
		validator.resetForm();
		validator = $("#mgrEntryAreaForm").validate();
		validator.resetForm();
		//Reset Current Date
		$("#dateSigned").datepicker({dateFormat:"mm/dd/yy"}).datepicker("setDate",new Date());
		//Disable Candidate Entry section
		$("#candidateDataPortlet").find("*").prop('disabled',true);
		//Disable Submit Button
		$("#submit").prop('disabled',true);
		//Clear Manager LDAP Id
		$("#mgrLdap").val("");  
		//Reset to default Middle Name
		resetMiddleNameSelection();
		//Reset to default Previous Address section
		resetPreviousAddressSelection();
		//Clear the Candidate less than 16 message
		$("#lessThan18Message").hide();
	}	
	
	//Resets the Middle Name section
	function resetMiddleNameSelection() {
		$("#middleNameRow").show();
		$("#middleName").prop('required',true);
	}
	
	//Resets the Pervious Address section
	function resetPreviousAddressSelection() {
		$("#address1Row").show();
		$("#address1").prop('required',true);
		$("#address2Row").show();
		$("#cityRow").show();
		$("#city").prop('required',true);
		$("#addressStateRow").show();
		$("#addressState").prop('required',true);
		$("#zipCodeRow").show();
		$("#zipCode").prop('required',true);
	}
	
	function updateMiddleNameField() {
		if($('input[name=hasMiddleName]:checked').val() == 'N') {
			$("#middleNameRow").hide();
			$("#middleName").prop('required',false);
			$("#middleName").val("");
		} else {
			$("#middleNameRow").show();
			$("#middleName").prop('required',true);
		}
	}
	
	function updatePreviousAddressField() {
		if($('input[name=livedAtCurrentAddressRequiredTime]:checked').val() == 'Y') {
			$("#address1Row").hide();
			$("#address1").prop('required',false);
			$("#address1").val("");
			$("#address2Row").hide();
			$("#address2").val("");
			$("#cityRow").hide();
			$("#city").prop('required',false);
			$("#city").val("");
			$("#addressStateRow").hide();
			$("#addressState").prop('required',false);
			$("#addressState option[value='']").prop('selected', true);
			$("#zipCodeRow").hide();
			$("#zipCode").prop('required',false);
			$("#zipCode").val("");
		} else {
			$("#address1Row").show();
			$("#address1").prop('required',true);
			$("#address2Row").show();
			$("#cityRow").show();
			$("#city").prop('required',true);
			$("#addressStateRow").show();
			$("#addressState").prop('required',true);
			$("#zipCodeRow").show();
			$("#zipCode").prop('required',true);
		}		
	}
	
	function checkForCandidateLessThan18() {
		
	}
	
</script>
</body>
</html>


